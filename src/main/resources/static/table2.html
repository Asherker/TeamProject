<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>庫存管理系統</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/gameDetail.css">
<!-- 這是按鍵的CSS -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />


<!-- 引入axios套件，用來透過HTTP協定在網頁內呼叫後端的API -->
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

	<!-- 引入Vue.js -->
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body id="app">
  <div class="container">
	<table>
		<thead>
			<tr>
				<th>編號</th>
				<th>遊戲名稱</th>
				<th>種類</th>
				<th>開發商</th>
				<th>平台</th>
				<th>價格</th>
				<th>庫存數量</th>
				<th>最新進貨日期</th>
				<th>最後出貨日期</th>
				<th>功能</th>
			</tr>
		</thead>
		<tbody>
			<tr v-for="item in games">
				<td @click="onShowDetail(item.id)">{{ item.id }}</td>
				<td>{{ item.name }}</td>
				<td>{{ item.category }}</td>
				<td>{{ item.developer }}</td>
				<td>{{ item.platform }}</td>
				<td>{{ item.price }}</td>
				<td>{{ item.quantity }}</td>
				<td>{{ item.inchange }}</td>
				<td>{{ item.outchange }}</td>
				<td>
				<span class="material-symbols-outlined">
				edit_note
				</span>
				<span class="material-symbols-outlined">
				delete
				</span>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<!-- <div v-if="showDetail" class="con group">
	<div class="grid-1-5">
		<h2>英文名稱</h2>
		<h3><span class="uppercase">中文名稱</span></h3>
		<p>發行時間</p>
		<ul>
			<li>Limited Email SupportLimited Email SupportL
				imited Email SupportLimited Email Support
				Limited Email Support</li>
		</ul>
		<p @click="showDetail = false" class="button">關 閉</p>
	</div> -->

</body>
</html>

</body>
<script>
	// Vue初始化
	const { createApp } = Vue
  
	createApp({
	  data() {
		// 網頁要使用的變數放這裡
		return {
		  message: 'Hello Vue!',
		  games: [],
		  showDetail: true,
		}
	  },
	  // 當網頁載入完成後會被Vue框架呼叫
	  mounted() {
		//打API
		axios.get("/games")
		.then( (response) =>{
			console.log(response);
        // 將API的商品資料存到Vue建立的products變數
        if(response.data.code == 0) {
          // 將API拿到的data存到Vue變數
        	this.games = response.data.data;
        }
		})
		.catch( (error) =>{
			console.log(error);
		})
	  },
	  // 網頁要用的方法寫在這裡
	  methods: {
		//新增資料
		onAdd(){
			alter("新增資料");
		},
		onShowDetail(id) {
        // 顯示食品詳細資訊的對話盒
        this.showDetail = true;

		axios.get("/gameDetail?id=" + id)
		.then((response) => {
			console.log(response);
			if (response.data.code == 0) {
				this.gameDetail = response.data.data;
			}
		})
		.catch((error) => {
			console.log(error);
		});
		} 
	  }
	}).mount('#app')
  </script>
</html>
